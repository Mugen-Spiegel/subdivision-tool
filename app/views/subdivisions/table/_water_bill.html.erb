<div class="card text-center">
    <div class="card-header">
        <h5>Water Bill</h5>
        <%= turbo_frame_tag 'search', data: {turbo_frame: "_top"} do %>
            <%= form_with url: water_billing_transaction_subdivision_path, method: :get do |form| %>
                <%= form.label :query, "Year:" %>
                <%= form.select :year_list, year_list%>
                <%= form.label :query, "Month:" %>
                <%= form.select :month, month_list%>
                <%= form.label :query, "First Name:" %>
                <%= form.text_field :first_name %>
                <%= form.label :query, "Last Name:" %>
                <%= form.text_field :last_name %>
                <%= form.submit "Search" %>
            <% end %>
        <% end %>
    </div>
    <div class="card-body">
        <%= turbo_frame_tag 'water_bill_table', data: {turbo_frame: "_top"} do %>
            <table class="table table-sm table-bordered table-hover table-inverse table-responsive table-dark table-striped">
                <thead class="thead-inverse|thead-default">
                    <tr>
                        <th  class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer">
                            <%=  sort_link(column: "created_at", label: "MONTH") %>
                            <%= sort_indicator if params[:column] == "created_at" %>
                        </th>
                        <th class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer">
                            <%=  sort_link(column: "name", label: "NAME") %>
                            <%= sort_indicator if params[:column] == "name" %>
                        </th>
                        <th class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer">
                            <%=  sort_link(column: "current_reading", label: "CURRENT READING") %>
                            <%= sort_indicator if params[:column] == "current_reading" %>
                        </th>
                        <th class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer">
                            <%=  sort_link(column: "previous_reading", label: "PREVIOUS READING") %>
                            <%= sort_indicator if params[:column] == "previous_reading" %>
                        </th>
                        <th class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer">
                            <%=  sort_link(column: "per_cubic_price", label: "PRICE PER CUBIC") %>
                            <%= sort_indicator if params[:column] == "per_cubic_price" %>
                        </th>
                        <th class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer">
                            <%=  sort_link(column: "bill_amount", label: "BILL AMOUNT") %>
                            <%= sort_indicator if params[:column] == "bill_amount" %>
                        </th>
                        <th class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer">Status</th>
                        <th class="text-left py-3 px-6 uppercase font-semibold text-sm hover:cursor-pointer">Due Date</th>
                    </tr>
                </thead>
                <tbody class="text-gray-700">
                        <% transaction.each do |bill| %>
                            <tr>
                                <td><%=bill.created_at.strftime("%B")%></td>
                                <td><%=bill.name %></td>
                                <td><%=bill.current_reading %></td>
                                <td><%=bill.previous_reading %></td>
                                <td><%=bill.per_cubic_price %></td>
                                <td><%=bill.bill_amount%></td>
                                <td><%="True" %></td>
                                <td><%="Next weeek" %></td>
                            </tr>
                        <% end %>
                </tbody>
            </table>
            <div class="pag-bar mt-5 pt-5">
                    <%== pagy_bootstrap_nav(@pagy) %>
            </div>
        <% end %>
    </div>
</div>